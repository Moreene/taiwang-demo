import{a as T}from"./axios-G2rPRu76.js";import{_ as V,m as N,a as P,h as b,o as d,c,i as h,b as t,F as m,t as r,d as g,n as L,r as A,e as a,j as v,w as k,f as p,S as y,v as x,p as M,g as j}from"./index-yW_oyohi.js";import{c as w}from"./cartStore-zGP-cR-g.js";import{P as B}from"./ProgessBarComponent-mzMdulCL.js";import{L as E}from"./LoadingComponent-52h3QW9H.js";import{t as u}from"./sweetalert-mKGGB-2x.js";import"./sweetalert2.all-WL1I6Ful.js";const U="/taiwang-demo/empety-cart.png";var R={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"taiwang",VITE_MAP:"AIzaSyB8xClOZxLQMzkbq6jjN2KlrBmFPPJkvEA",BASE_URL:"/taiwang-demo/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:q,VITE_APIPATH:D}=R,O={components:{ProgessBarComponent:B,LoadingComponent:E},data(){return{coupon:"",delivery:"自取",isLoading:!0}},computed:{...N(w,["cart"])},methods:{...P(w,["deleteItem","increaseCartNum","decreaseCartNum","getCart"]),useCoupon(){const s={code:this.coupon};T.post(`${q}/api/${D}/coupon`,{data:s}).then(o=>{u("top","success","已成功使用優惠代碼"),this.getCart(),this.coupon=""}).catch(o=>{u("top","error","優惠代碼使用失敗"),this.coupon=""})},goCheckout(){localStorage.setItem("pickUp",this.delivery),this.$router.push("/orderInfo")},copyCode(s){const o=this.$refs.code.innerText;navigator.clipboard.writeText(o).then(()=>{s.target.blur(),u("top","success","已成功複製優惠代碼")}).catch(C=>{u("top","error","複製優惠代碼失敗")})}},watch:{"cart.final_total":{handler(s){typeof s<"u"&&Math.round(s)<500&&(this.delivery="自取")},immediate:!0}},created(){setTimeout(()=>this.isLoading=!1,400)}},n=s=>(M("data-v-d42634d7"),s=s(),j(),s),z={class:"bg-wave"},F={class:"container"},H={class:"col-lg-10 mx-auto"},J={class:"mb-48"},K={key:0,class:"h5 bg-gray text-light ps-12 py-16 mb-0"},Q={class:"table table-borderless mb-0"},Z=n(()=>t("thead",{class:"border-bottom border-dark text-nowrap"},[t("tr",{class:"text-center"},[t("th",{scope:"col",style:{width:"180px"}},"示意圖"),t("th",{scope:"col"},"餐點名稱"),t("th",{scope:"col"},"單價"),t("th",{scope:"col",style:{width:"250px"}},"數量"),t("th",{scope:"col",class:"d-none d-md-block"},"小計"),t("th",{scope:"col"},"刪除")])],-1)),G={class:"text-center text-nowrap"},W={scope:"row",class:"fw-normal"},X=["src","alt"],Y={class:"text-notoSans"},$={class:"d-flex justify-content-center"},tt={class:"input-group w-75 d-flex align-items-end"},et=["onClick","disabled"],st=n(()=>t("i",{class:"bi bi-dash"},null,-1)),ot=[st],nt=["onUpdate:modelValue"],at=["onClick"],lt=n(()=>t("i",{class:"bi bi-plus"},null,-1)),dt=[lt],ct={class:"d-none d-md-table-cell"},rt={class:"text-notoSans"},it=["onClick"],pt=n(()=>t("i",{class:"bi bi-trash fs-5 link-gray"},null,-1)),_t=[pt],ht={class:"border border-dark border-top-0 bg-white p-12"},ut={class:"d-flex justify-content-between"},bt=n(()=>t("i",{class:"bi bi-arrow-right"},null,-1)),mt=n(()=>t("span",{class:"text-notoSans d-inline-block p-6 bg-danger text-white me-6"},"優惠促銷",-1)),yt={class:"text-notoSans"},ft={ref:"code"},gt={class:"row gy-48 gy-md-0 pb-72"},vt={class:"col-md-7"},kt=n(()=>t("h2",{class:"h5 bg-gray text-light ps-12 py-16 mb-0"},"取餐方式",-1)),xt={class:"border border-dark bg-white"},wt={class:"ps-12 py-16"},Ct={class:"form-check form-check-inline"},St=n(()=>t("label",{class:"form-check-label",for:"pickup"},"自取",-1)),It={class:"form-check form-check-inline"},Tt=["disabled"],Vt=n(()=>t("label",{class:"form-check-label",for:"delivery"},[a("外送 "),t("span",{class:"text-gray"},"(折扣後滿500元)")],-1)),Nt={class:"border border-dark border-top-0 bg-white"},Pt=n(()=>t("h2",{class:"h5 bg-gray text-light ps-12 py-16 mb-0"},"送貨及付款方式",-1)),Lt={class:"ps-12 py-16"},At={class:"mb-16"},Mt=n(()=>t("label",{for:"送貨方式",class:"form-label"},"送貨方式",-1)),jt={key:0,type:"text",id:"送貨方式",class:"form-control w-75",value:"自取",disabled:""},Bt={key:1,type:"text",id:"送貨方式",class:"form-control w-75",value:"泰汪小蜜蜂",disabled:""},Et=n(()=>t("div",null,[t("label",{for:"付款方式",class:"form-label"},"付款方式"),t("input",{type:"text",id:"付款方式",class:"form-control w-75",value:"信用卡 (支援VISA、JCB、Master)",disabled:""})],-1)),Ut={class:"col-md-5"},Rt={class:"h-100 border border-dark bg-white"},qt=n(()=>t("h2",{class:"h5 bg-gray text-light ps-12 py-16 mb-0"},"訂單資訊",-1)),Dt={class:"border-bottom border-dark px-12 py-16"},Ot={class:"d-flex justify-content-between"},zt=n(()=>t("p",null,"小計：",-1)),Ft={class:"text-notoSans"},Ht=n(()=>t("div",{class:"d-flex justify-content-between"},[t("p",null,"運費："),t("p",null,[a("NT$ "),t("span",{class:"text-notoSans"},"0")])],-1)),Jt=n(()=>t("p",{class:"mb-8"},"優惠代碼",-1)),Kt={class:"d-flex"},Qt=["disabled"],Zt={class:"px-12 py-24 pb-md-0"},Gt={class:"d-flex justify-content-between"},Wt=n(()=>t("p",{class:"fw-bold"},"合計：",-1)),Xt={class:"fw-bold"},Yt={class:"text-notoSans"},$t={key:0,class:"text-danger ms-4"},te={key:1,class:"pb-72 text-center"},ee=n(()=>t("h2",{class:"mb-16"},"Oops,目前購物車內沒有東西唷！",-1)),se={class:"mb-32"},oe=n(()=>t("img",{src:U,class:"empety-cart",alt:"空購物車"},null,-1));function ne(s,o,C,ae,l,i){const S=b("LoadingComponent"),I=b("ProgessBarComponent"),f=b("RouterLink");return d(),c(m,null,[h(S,{active:l.isLoading,"onUpdate:active":o[0]||(o[0]=e=>l.isLoading=e)},null,8,["active"]),t("div",z,[t("div",F,[t("div",H,[h(I),s.cart.carts&&s.cart.carts.length?(d(),c(m,{key:0},[t("div",J,[s.cart.carts?(d(),c("h2",K,"購物車 ( "+r(s.cart.carts.length)+" ) ",1)):g("",!0),t("div",{class:L(["table-responsive border border-dark",{"fixed-height":s.cart.carts&&s.cart.carts.length>3}])},[t("table",Q,[Z,t("tbody",G,[(d(!0),c(m,null,A(s.cart.carts,e=>(d(),c("tr",{key:e.id,class:"align-middle border-bottom"},[t("th",W,[t("img",{src:e.product.imageUrl,alt:e.product.title,class:"food-img"},null,8,X)]),t("td",null,r(e.product.title),1),t("td",null,[a("NT$ "),t("span",Y,r(e.product.price),1)]),t("td",null,[t("div",$,[t("div",tt,[t("button",{class:"btn btn-secondary text-light d-flex justify-content-center align-items-center d-none d-md-block",type:"button",onClick:_=>s.decreaseCartNum(e),disabled:e.qty===1},ot,8,et),p(t("input",{type:"text",class:"form-control text-center p-0 py-md-6 px-md-12",min:"1","onUpdate:modelValue":_=>e.qty=_,readonly:""},null,8,nt),[[x,e.qty,void 0,{number:!0}]]),t("button",{class:"btn btn-secondary text-light d-flex justify-content-center align-items-center d-none d-md-block",type:"button",onClick:_=>s.increaseCartNum(e)},dt,8,at)])])]),t("td",ct,[a("NT$ "),t("span",rt,r(e.qty*e.product.price),1)]),t("td",null,[t("a",{href:"#",onClick:k(_=>s.deleteItem(e),["prevent"])},_t,8,it)])]))),128))])])],2),t("div",ht,[t("p",ut,[a("更多精彩優惠等著您使用！ "),h(f,{to:"/products",class:"link-gold"},{default:v(()=>[a("繼續購物 "),bt]),_:1})]),mt,t("span",yt,[a("輸入「 "),t("span",ft,"tai6666",512),a(" 」優惠代碼再享 85 折 ﹙"),t("a",{href:"#",class:"link-danger",onClick:o[1]||(o[1]=k(e=>i.copyCode(e),["prevent"]))},"點我複製"),a("﹚")])])]),t("div",gt,[t("div",vt,[kt,t("div",xt,[t("div",wt,[t("div",Ct,[Math.round(s.cart.final_total)<500?p((d(),c("input",{key:0,class:"form-check-input border-gray",type:"radio",name:"取餐方式",id:"pickup",value:"自取","onUpdate:modelValue":o[2]||(o[2]=e=>l.delivery=e),checked:""},null,512)),[[y,l.delivery]]):p((d(),c("input",{key:1,class:"form-check-input border-gray",type:"radio",name:"取餐方式",id:"pickup",value:"自取","onUpdate:modelValue":o[3]||(o[3]=e=>l.delivery=e)},null,512)),[[y,l.delivery]]),St]),t("div",It,[p(t("input",{class:"form-check-input border-gray",type:"radio",name:"取餐方式",id:"delivery",value:"外送","onUpdate:modelValue":o[4]||(o[4]=e=>l.delivery=e),disabled:Math.round(s.cart.final_total)<500},null,8,Tt),[[y,l.delivery]]),Vt])])]),t("div",Nt,[Pt,t("div",Lt,[t("div",At,[Mt,l.delivery==="自取"||Math.round(s.cart.final_total)<500?(d(),c("input",jt)):(d(),c("input",Bt))]),Et])])]),t("div",Ut,[t("div",Rt,[qt,t("div",Dt,[t("div",Ot,[zt,t("p",null,[a("NT$ "),t("span",Ft,r(s.cart.total),1)])]),Ht,Jt,t("div",Kt,[p(t("input",{type:"text",class:"form-control w-50 border-gray","onUpdate:modelValue":o[5]||(o[5]=e=>l.coupon=e)},null,512),[[x,l.coupon]]),t("button",{class:"btn btn-secondary text-light ms-8",type:"button",disabled:l.coupon==="",onClick:o[6]||(o[6]=(...e)=>i.useCoupon&&i.useCoupon(...e))},"套用",8,Qt)])]),t("div",Zt,[t("div",Gt,[Wt,t("p",Xt,[a("NT$ "),t("span",Yt,r(Math.round(s.cart.final_total)),1),s.cart.final_total!==s.cart.total?(d(),c("span",$t,"(已使用優惠)")):g("",!0)])]),t("button",{type:"button",class:"btn btn-primary text-white w-100",onClick:o[7]||(o[7]=(...e)=>i.goCheckout&&i.goCheckout(...e))},"下一步")])])])])],64)):(d(),c("div",te,[ee,t("h2",se,[a("快去"),h(f,{to:"/products",class:"link-secondary border-bottom border-secondary"},{default:v(()=>[a("選購")]),_:1}),a(" 想吃餐點吧")]),oe]))])])])],64)}const he=V(O,[["render",ne],["__scopeId","data-v-d42634d7"]]);export{he as default};
